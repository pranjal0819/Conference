{% extends "base.html" %}{% load staticfiles %}{% block head_title %}PC Member list | {{ block.super }}{% endblock %}
{% block css %}{% endblock %}{% block content %}
    <div id="main">
        <main class="container bg-white">
            {% if messages %}{% for m in messages %}{{ m }}<br>{% endfor %}{% endif %}
            <div class="px-3 pt-4 d-flex justify-content-between">
                <h2>PC Member List</h2>
                <div style="width: 300px">
                    <input type="text" class="form-control" id="search" onkeyup="mySearch12345()" placeholder="Search">
                </div>
            </div>
            <div class="px-3 py-3 pb-md-4 table-responsive-xl">
                <table class="table table-bordered table-hover" id="myTable">
                    <thead>
                    <tr style="font-weight: 600;">
                        <th scope="col">#</th>
                        <th scope="col" width="30%">Pc member Name</th>
                        <th scope="col" width="30%">Pc member Email</th>
                        <th scope="col" style="text-align: center">Bid</th>
                        <th scope="col" style="text-align: center">Assign</th>
                        <th scope="col" style="text-align: center">Review</th>
                        <th scope="col" width="10px" style="text-align: center; font-size: 12px;">Total Assigned</th>
                        <th scope="col" width="10px" style="text-align: center">Detail</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for list in user_list %}
                        <tr>
                            <td scope="row">{{ forloop.counter }}</td>
                            <td>{{ list.0.name }}</td>
                            <td>{{ list.0.pcEmail }}</td>
                            <td>{% if list.1 %}Yes{% else %}No{% endif %}</td>
                            <td id="update{{ list.0.id }}">{% if list.2 %}
                                <button class="btn btn-outline-danger btn-sm col-12"
                                        onclick='loadDoc("{% url 'conference:selected_user' slug=slug paper_pk=paper.pk user_pk=list.0.id %}", {{ list.0.id }})'>
                                    Unassigned
                                </button>{% else %}
                                <button class="btn btn-outline-success btn-sm col-12"
                                        onclick='loadDoc("{% url 'conference:selected_user' slug=slug paper_pk=paper.pk user_pk=list.0.id %}", {{ list.0.id }})'>
                                    Assign
                                </button>{% endif %}</td>
                            <td style="text-align: center">{% if list.3 %}Done{% else %}Pending{% endif %}</td>
                            <td style="text-align: center">{{ list.0.totalPaper }}</td>
                            <td><a href="{% url 'conference:profile_pc_member' slug=slug email=list.0.pcEmail %}"
                                   class="btn btn-outline-info btn-sm col-12">Detail</a></td>
                            {#<a href="{% url 'conference:send_email' slug=slug pk=list.0.pk %}">Send Email</a>#}
                        </tr>
                    {% endfor %}</tbody>
                </table>
            </div>
            <div class="px-3 py-4 clearfix">
                <a href="{% url 'conference:add_pc_member' slug %}" class="btn btn-outline-primary">Add PC Member</a>
                <a href="{% url 'conference:view_all_paper' slug=slug %}" class="btn btn-outline-primary float-right">
                    Paper list</a>
            </div>
        </main>
    </div>
{% endblock %}
{% block script %}
    <script>function loadDoc(URL_address, s) {
        const change = $("#update" + s);
        $.ajax({
            url: URL_address, method: "GET", success: function (data) {
                if (data.added) change.html("<button class=\"btn btn-outline-danger btn-sm col-12\" onclick='loadDoc(\"" + URL_address + "\"," + s + ")'>Unassigned</button>");
                else change.html("<button class=\"btn btn-outline-success btn-sm col-12\" onclick='loadDoc(\"" + URL_address + "\"," + s + ")'>Assign</button>");
            }, error: function (data) {
                console.log("error", data)
            }
        })
    }</script>
{% endblock %}